(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{2799:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(5155),n=s(2821),l=s(3048);function i(e){let{children:t,variant:s="blue",size:i="md",glow:r=!0,className:o}=e,c=(0,l.al)(),d=r&&!c;return(0,a.jsx)("span",{className:(0,n.A)("inline-flex items-center justify-center font-exo font-semibold uppercase tracking-wider","border-2 rounded-full",c?"":"backdrop-blur-sm","transition-all duration-300",{blue:"bg-neon-blue/20 text-neon-blue border-neon-blue",orange:"bg-neon-orange/20 text-neon-orange border-neon-orange",purple:"bg-neon-purple/20 text-neon-purple border-neon-purple",green:"bg-neon-green/20 text-neon-green border-neon-green",red:"bg-red-500/20 text-red-400 border-red-400"}[s],{sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-base"}[i],{blue:d?"shadow-neon-blue":"",orange:d?"shadow-neon-orange":"",purple:d?"shadow-neon-purple":"",green:d?"shadow-[0_0_20px_rgba(0,255,157,0.5)]":"",red:d?"shadow-[0_0_20px_rgba(239,68,68,0.5)]":""}[s],o),children:t})}},4451:(e,t,s)=>{Promise.resolve().then(s.bind(s,9040))},4492:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(5155),n=s(4486),l=s(2821),i=s(3048);function r(e){let{children:t,title:s,subtitle:r,variant:o="default",className:c}=e,d=(0,i.ze)(),x=(0,a.jsxs)(a.Fragment,{children:[(s||r)&&(0,a.jsxs)("div",{className:"mb-4 sm:mb-6 border-b border-white/10 pb-3 sm:pb-4",children:[s&&(0,a.jsx)("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-neon-cyan mb-1 sm:mb-2 text-shadow-glow-light sm:text-shadow-glow",children:s}),r&&(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-400 uppercase tracking-wider",children:r})]}),t]});return d?(0,a.jsx)("div",{className:(0,l.A)("glass-panel-mobile p-4 sm:p-6 md:p-8","bordered"===o&&"border-2 border-neon-blue/30",c),children:x}):(0,a.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:(0,l.A)("glass-panel p-4 sm:p-6 md:p-8","bordered"===o&&"border-2 border-neon-blue/30",c),children:x})}},7972:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(5155),n=s(4486),l=s(2115),i=s(2821),r=s(3048);let o=(0,l.memo)(function(e){let{children:t,variant:s="glass",hover:l=!0,onClick:o,className:c,animated:d=!0}=e,x=(0,r.ze)(),m=(0,r.al)(),u=d&&!x,p=l&&!m,h=(0,a.jsxs)("div",{onClick:o,className:(0,i.A)("relative rounded-xl sm:rounded-2xl p-4 sm:p-5 md:p-6 transition-all duration-300",{blue:"neon-border bg-cyber-navy/50 backdrop-blur-mobile",orange:"neon-border-orange bg-cyber-navy/50 backdrop-blur-mobile",purple:"neon-border-purple bg-cyber-navy/50 backdrop-blur-mobile",green:"border-2 border-neon-green/50 rounded-xl bg-cyber-navy/50 backdrop-blur-mobile shadow-card-green",glass:"glass-panel-mobile"}[s],p?"hover:scale-105 hover:shadow-2xl cursor-pointer":o?"cursor-pointer":"",c),children:[u&&!m&&(0,a.jsx)(n.P.div,{className:"absolute inset-0 rounded-2xl opacity-20 pointer-events-none",animate:{background:["radial-gradient(circle at 0% 0%, rgba(0, 229, 255, 0.3) 0%, transparent 50%)","radial-gradient(circle at 100% 100%, rgba(0, 229, 255, 0.3) 0%, transparent 50%)","radial-gradient(circle at 0% 0%, rgba(0, 229, 255, 0.3) 0%, transparent 50%)"]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),(0,a.jsx)("div",{className:"relative z-10",children:t})]});return!u||m?h:(0,a.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:p?{scale:1.02}:void 0,children:h})})},9040:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(5155),n=s(4486),l=s(2115),i=s(63),r=s(8955),o=s(8211),c=s(4492),d=s(7972),x=s(2799),m=s(1166),u=s(8122),p=s(960),h=s(854);function b(){let e=(0,r.c)("admin.users"),t=(0,r.c)("common"),s=(0,i.useRouter)(),{user:b,isAuthenticated:g,isLoading:y}=(0,h.A)(),[v,j]=(0,l.useState)([]),[f,N]=(0,l.useState)(!0),[w,A]=(0,l.useState)(""),[S,k]=(0,l.useState)(1),[P,F]=(0,l.useState)(!0),[_,C]=(0,l.useState)(!1),[E,z]=(0,l.useState)(0),[T,D]=(0,l.useState)(""),I=function(e,t){let[s,a]=(0,l.useState)(e);return(0,l.useEffect)(()=>{let t=setTimeout(()=>{a(e)},500);return()=>{clearTimeout(t)}},[e,500]),s}(T,500),[L,U]=(0,l.useState)("all"),[O,R]=(0,l.useState)(null),[M,K]=(0,l.useState)([]),[H,J]=(0,l.useState)(!1),[X,G]=(0,l.useState)("all"),[V,Z]=(0,l.useState)([]),[q,B]=(0,l.useState)(null),[Q,W]=(0,l.useState)("");(0,l.useEffect)(()=>{y||g&&(null==b?void 0:b.role)==="admin"||s.push("/login")},[g,y,b,s]),(0,l.useEffect)(()=>{g&&(null==b?void 0:b.role)==="admin"&&Y()},[g,b,I,L]);let Y=(0,l.useCallback)(async()=>{var e,t,s,a,n;N(!0),k(1);try{let a=await p.F.getAllUsers(I||void 0,"all"!==L?L:void 0,1,50);j(a.data||[]),z((null==(e=a.pagination)?void 0:e.total)||0),F(((null==(t=a.pagination)?void 0:t.page)||1)<((null==(s=a.pagination)?void 0:s.totalPages)||1))}catch(e){console.error("Failed to fetch users:",e),A((null==(n=e.response)||null==(a=n.data)?void 0:a.message)||"Failed to load users")}finally{N(!1)}},[I,L]),$=async()=>{if(!_&&P)try{var e;C(!0);let t=S+1,s=await p.F.getAllUsers(I||void 0,"all"!==L?L:void 0,t,50);j(e=>[...e,...s.data||[]]),k(t),F(t<((null==(e=s.pagination)?void 0:e.totalPages)||1))}catch(e){console.error("Failed to load more users:",e)}finally{C(!1)}},ee=async e=>{J(!0);try{let t=await p.F.getUserTransactions(e,"all"!==X?X:void 0);K(t)}catch(e){var t,s;console.error("Failed to fetch transactions:",e),A((null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Failed to load transactions")}finally{J(!1)}},et=async e=>{try{let t=(await p.F.getAdminSubscriptions()).filter(t=>t.user_id===e);Z(t)}catch(e){console.error("Failed to fetch subscriptions:",e)}},es=async e=>{if(confirm("Are you sure you want to refund this subscription? This will return the money to the customer and cancel the subscription immediately.")){B(e),W(""),A("");try{await p.F.refundSubscription(e),W("Refund processed successfully. Customer will receive funds in 5-10 business days."),await Promise.all([ee(O.id),et(O.id)])}catch(e){var t,s;A((null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Failed to process refund")}finally{B(null)}}},ea=async e=>{R(e),G("all"),W(""),await Promise.all([ee(e.id),et(e.id)])};return((0,l.useEffect)(()=>{O&&ee(O.id)},[X]),f&&!O)?(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(o.A,{}),(0,a.jsx)("div",{className:"container mx-auto px-4 pt-24 sm:pt-32 pb-20",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-neon-cyan"}),(0,a.jsx)("p",{className:"mt-4 text-gray-400",children:t("loading")})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(o.A,{}),(0,a.jsxs)("div",{className:"container mx-auto px-4 pt-24 sm:pt-32 pb-20",children:[(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8 sm:mb-12",children:[(0,a.jsx)("h1",{className:"font-orbitron text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-neon-cyan mb-4 text-shadow-glow",children:e("title")}),(0,a.jsx)("p",{className:"text-base sm:text-lg md:text-xl text-gray-300",children:e("subtitle")})]}),w&&(0,a.jsx)(n.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:(0,a.jsx)(d.A,{variant:"glass",className:"bg-red-500/10 border-red-500/50",children:(0,a.jsx)("p",{className:"text-red-400",children:w})})}),Q&&(0,a.jsx)(n.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:(0,a.jsx)(d.A,{variant:"glass",className:"bg-green-500/10 border-green-500/50",children:(0,a.jsx)("p",{className:"text-green-400",children:Q})})}),O?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6 sm:mb-8",children:[(0,a.jsx)(m.A,{variant:"ghost",onClick:()=>{R(null),K([])},className:"mb-4",children:e("backToUsers")}),(0,a.jsx)(d.A,{variant:"glass",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gradient-to-br from-neon-cyan to-neon-blue flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(u.JXP,{className:"text-white text-lg sm:text-2xl"})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-orbitron font-bold text-white truncate",children:O.username}),(0,a.jsx)("p",{className:"text-gray-400 text-sm truncate",children:O.email}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 truncate",children:O.full_name})]})]}),(0,a.jsxs)("div",{className:"text-left sm:text-right space-y-2 mt-2 sm:mt-0",children:[(0,a.jsxs)(x.A,{variant:"blue",size:"lg",children:[O.activeSubscriptions||0," Active Subscriptions"]}),(0,a.jsxs)("p",{className:"text-neon-green text-xl sm:text-2xl font-bold",children:["€",O.totalSpent||0]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Total Spent"})]})]})})]}),(0,a.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,a.jsxs)(c.A,{title:"Transactions",subtitle:"".concat(M.length," transactions"),children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row justify-between gap-4 mb-4 sm:mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.K7R,{className:"text-neon-cyan text-xl"}),(0,a.jsxs)("select",{value:X,onChange:e=>G(e.target.value),className:"px-3 sm:px-4 py-2 bg-cyber-navy/50 border border-neon-cyan/30 rounded-lg text-white text-sm focus:outline-none focus:border-neon-cyan transition-colors",children:[(0,a.jsx)("option",{value:"all",children:"All Time"}),(0,a.jsx)("option",{value:"24h",children:"Last 24 Hours"}),(0,a.jsx)("option",{value:"month",children:"Last Month"})]})]})}),H?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-neon-cyan"})}):0===M.length?(0,a.jsx)("div",{className:"text-center py-12 text-gray-400",children:"No transactions found"}):(0,a.jsx)("div",{className:"space-y-4 mt-0",children:M.map((e,t)=>{let s=V.find(t=>t.id===e.subscriptionId),l="COMPLETED"===e.status&&(null==s?void 0:s.status)==="active";return(0,a.jsx)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},children:(0,a.jsx)(d.A,{variant:"glass",hover:!1,children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-neon-orange to-neon-pink flex items-center justify-center",children:(0,a.jsx)(u.z8N,{className:"text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-semibold",children:e.packName||"N/A"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:e.description||"No description"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-13",children:[(0,a.jsx)(u.Ohp,{className:"text-gray-400 text-sm"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[(0,a.jsx)(x.A,{variant:"COMPLETED"===e.status?"green":"PENDING"===e.status?"orange":"REFUNDED"===e.status?"blue":"red",size:"sm",children:e.status}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("p",{className:"text-xl sm:text-2xl font-orbitron font-bold text-neon-green",children:["€",e.amount]})}),e.subscriptionId&&l&&(0,a.jsx)(m.A,{variant:"ghost",size:"sm",icon:(0,a.jsx)(u.jTZ,{}),onClick:()=>es(e.subscriptionId),disabled:q===e.subscriptionId,className:"text-orange-400 border-orange-400/50 hover:bg-orange-400/20",children:q===e.subscriptionId?"Processing...":"Refund"})]})]})})},e.id)})})]})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:(0,a.jsx)(d.A,{variant:"glass",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(u.CKj,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl"}),(0,a.jsx)("input",{type:"text",value:T,onChange:e=>D(e.target.value),placeholder:e("searchPlaceholder"),className:"w-full pl-12 pr-4 py-3 bg-cyber-navy/50 border border-neon-cyan/30 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-neon-cyan transition-colors text-sm sm:text-base"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.K7R,{className:"text-neon-cyan text-xl hidden sm:block"}),(0,a.jsxs)("select",{value:L,onChange:e=>U(e.target.value),className:"px-3 sm:px-4 py-3 bg-cyber-navy/50 border border-neon-cyan/30 rounded-lg text-white focus:outline-none focus:border-neon-cyan transition-colors text-sm",children:[(0,a.jsx)("option",{value:"all",children:e("timeFilters.all")}),(0,a.jsx)("option",{value:"24h",children:e("timeFilters.24h")}),(0,a.jsx)("option",{value:"month",children:e("timeFilters.month")})]})]})]})})}),(0,a.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,a.jsx)(c.A,{title:e("title"),subtitle:"".concat(v.length," ").concat(e("usersFound").replace("{count}",v.length.toString()).split(" ").slice(1).join(" ")),children:(0,a.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[0===v.length?(0,a.jsx)("div",{className:"text-center py-8 sm:py-12 text-gray-400",children:e("noUsers")}):v.map((s,l)=>(0,a.jsx)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+.05*l},children:(0,a.jsx)(d.A,{variant:"glass",hover:!0,className:"cursor-pointer",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-neon-cyan to-neon-blue flex items-center justify-center",children:(0,a.jsx)(u.JXP,{className:"text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-semibold text-lg",children:s.username}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:s.email})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 ml-13",children:[(0,a.jsxs)(x.A,{variant:"blue",size:"sm",children:[s.activeSubscriptions||0," ",e("activeSubs")]}),(0,a.jsxs)(x.A,{variant:"green",size:"sm",children:["€",s.totalSpent||0," ",e("total")]}),(0,a.jsx)(x.A,{variant:"active"===s.status?"green":"orange",size:"sm",children:s.status})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,a.jsx)("p",{className:"text-xs text-gray-400",children:e("joined")}),(0,a.jsx)("p",{className:"text-sm text-white",children:new Date(s.created_at).toLocaleDateString()})]}),(0,a.jsx)(m.A,{variant:"primary",size:"sm",icon:(0,a.jsx)(u.Vap,{}),onClick:()=>ea(s),children:t("view")})]})]})})},s.id)),P&&v.length>0&&(0,a.jsx)("div",{className:"flex justify-center mt-6",children:(0,a.jsx)(m.A,{onClick:$,disabled:_,children:_?t("loading"):"Load More (".concat(v.length," of ").concat(E,")")})})]})})})]})]})]})}}},e=>{e.O(0,[844,594,240,211,441,493,358],()=>e(e.s=4451)),_N_E=e.O()}]);