(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{17:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5155),r=s(2115),n=s(4486),l=s(63),o=s(2619),i=s.n(o),c=s(8955),d=s(8211),m=s(4492),x=s(1448),u=s(8122),b=s(960),h=s(8406);function p(){var e;let t=(0,c.c)("auth.login");(0,l.useRouter)();let s=(0,l.useSearchParams)(),o=null!=(e=null==s?void 0:s.get("redirect"))?e:null,p=(0,h.n)(e=>e.setUser),[y,f]=(0,r.useState)(""),[g,j]=(0,r.useState)(""),[v,w]=(0,r.useState)(""),[N,k]=(0,r.useState)(""),[C,S]=(0,r.useState)(!1),[A,M]=(0,r.useState)(!1),[D,F]=(0,r.useState)(""),[P,E]=(0,r.useState)(""),[_,L]=(0,r.useState)(!1),q=(0,r.useRef)(null),I=async e=>{if(e.preventDefault(),k(""),!v)return void k("Please complete the security check");S(!0);try{let e=await b.F.login({emailOrUsername:y,password:g,captchaToken:v});if(e.requiresTwoFactor){M(!0),F(e.userId),S(!1);return}p(e.user);let t=e.user.preferred_language||"en";document.cookie="NEXT_LOCALE=".concat(t,";path=/;max-age=31536000"),o&&"admin"===e.user.role?window.location.href=o:"admin"===e.user.role?window.location.href="/admin":window.location.href="/bets"}catch(e){var s,a,r;k((null==(a=e.response)||null==(s=a.data)?void 0:s.message)||t("error")),w(""),null==(r=q.current)||r.reset()}finally{S(!1)}},O=async e=>{e.preventDefault(),k(""),S(!0);try{let e=await b.F.verify2FA(D,P);p(e.user);let t=e.user.preferred_language||"en";document.cookie="NEXT_LOCALE=".concat(t,";path=/;max-age=31536000"),o&&"admin"===e.user.role?window.location.href=o:"admin"===e.user.role?window.location.href="/admin":window.location.href="/bets"}catch(e){var t,s;k((null==(s=e.response)||null==(t=s.data)?void 0:t.message)||"Invalid verification code")}finally{S(!1)}},V=async()=>{L(!0),k("");try{await b.F.resend2FA(D),k("")}catch(s){var e,t;k((null==(t=s.response)||null==(e=t.data)?void 0:e.message)||"Failed to resend code")}finally{L(!1)}};return A?(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(d.A,{}),(0,a.jsx)("div",{className:"container mx-auto px-4 pt-24 sm:pt-32 pb-20",children:(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-neon-cyan to-neon-purple flex items-center justify-center",children:(0,a.jsx)(u.pcC,{className:"text-3xl text-white"})}),(0,a.jsx)("h1",{className:"font-orbitron text-2xl sm:text-3xl font-bold text-neon-cyan mb-4 text-shadow-glow",children:"Two-Factor Authentication"}),(0,a.jsx)("p",{className:"text-gray-300 text-sm sm:text-base",children:"Enter the verification code sent to your email"})]}),(0,a.jsx)(m.A,{children:(0,a.jsxs)("form",{onSubmit:O,className:"space-y-4 sm:space-y-6",children:[N&&(0,a.jsx)(n.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 border border-red-500 rounded-lg p-3 sm:p-4 text-red-400 text-sm",children:N}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Verification Code"}),(0,a.jsx)("input",{type:"text",value:P,onChange:e=>E(e.target.value.replace(/\D/g,"").slice(0,6)),required:!0,maxLength:6,className:"w-full bg-cyber-navy/50 border border-neon-blue/30 rounded-lg py-4 px-4 text-white text-center text-2xl font-mono tracking-[0.5em] placeholder-gray-500 focus:outline-none focus:border-neon-cyan transition-colors",placeholder:"000000",autoFocus:!0})]}),(0,a.jsxs)("button",{type:"submit",disabled:C||6!==P.length,className:"relative w-full font-orbitron font-bold uppercase tracking-wider transition-all duration-300 rounded-xl light-sweep overflow-hidden bg-gradient-to-r from-neon-blue to-neon-cyan text-cyber-dark hover:scale-105 glow-blue border-2 border-neon-blue px-6 sm:px-8 py-3 sm:py-4 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsxs)("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[C?"Verifying...":"Verify",(0,a.jsx)(u.dyV,{})]}),(0,a.jsx)("div",{className:"absolute inset-0 bg-white/20 blur-xl"})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{type:"button",onClick:V,disabled:_,className:"text-neon-cyan hover:text-neon-blue transition-colors text-sm",children:_?"Sending...":"Didn't receive a code? Resend"})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>{M(!1),E(""),F("")},className:"text-gray-400 hover:text-white transition-colors text-sm",children:"â† Back to login"})})]})})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(d.A,{}),(0,a.jsx)("div",{className:"container mx-auto px-4 pt-24 sm:pt-32 pb-20",children:(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[(0,a.jsx)("h1",{className:"font-orbitron text-3xl sm:text-4xl md:text-5xl font-bold text-neon-cyan mb-4 text-shadow-glow",children:t("title")}),(0,a.jsx)("p",{className:"text-gray-300 text-sm sm:text-base",children:t("subtitle")})]}),(0,a.jsx)(m.A,{children:(0,a.jsxs)("form",{onSubmit:I,className:"space-y-4 sm:space-y-6",children:[N&&(0,a.jsx)(n.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 border border-red-500 rounded-lg p-3 sm:p-4 text-red-400 text-sm",children:N}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:t("emailOrUsername")}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.pHD,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-neon-cyan"}),(0,a.jsx)("input",{type:"text",value:y,onChange:e=>f(e.target.value),required:!0,className:"w-full bg-cyber-navy/50 border border-neon-blue/30 rounded-lg py-3 pl-12 pr-4 text-white placeholder-gray-500 focus:outline-none focus:border-neon-cyan transition-colors text-sm sm:text-base",placeholder:t("emailPlaceholder")})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:t("password")}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.F5$,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-neon-cyan"}),(0,a.jsx)("input",{type:"password",value:g,onChange:e=>j(e.target.value),required:!0,className:"w-full bg-cyber-navy/50 border border-neon-blue/30 rounded-lg py-3 pl-12 pr-4 text-white placeholder-gray-500 focus:outline-none focus:border-neon-cyan transition-colors text-sm sm:text-base",placeholder:t("passwordPlaceholder")})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between text-sm",children:(0,a.jsx)(i(),{href:"/forgot-password",className:"text-neon-cyan hover:text-neon-blue transition-colors",children:t("forgotPassword")})}),(0,a.jsx)(x.A,{ref:q,onVerify:e=>{w(e)}}),(0,a.jsxs)("button",{type:"submit",disabled:C,className:"relative w-full font-orbitron font-bold uppercase tracking-wider transition-all duration-300 rounded-xl light-sweep overflow-hidden bg-gradient-to-r from-neon-blue to-neon-cyan text-cyber-dark hover:scale-105 glow-blue border-2 border-neon-blue px-6 sm:px-8 py-3 sm:py-4 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsxs)("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[C?t("loggingIn"):t("submit"),(0,a.jsx)(u.dyV,{})]}),(0,a.jsx)("div",{className:"absolute inset-0 bg-white/20 blur-xl"})]}),(0,a.jsxs)("div",{className:"text-center text-sm text-gray-400",children:[t("noAccount")," ",(0,a.jsx)(i(),{href:"/signup",className:"text-neon-cyan hover:text-neon-blue transition-colors font-semibold",children:t("signUp")})]})]})})]})})]})}},1448:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(5155),r=s(2115),n=s(8955),l=s(8122);let o=(0,r.forwardRef)((e,t)=>{let{onVerify:s,onError:o}=e,[i,c]=(0,r.useState)(null),[d,m]=(0,r.useState)(""),[x,u]=(0,r.useState)(!1),[b,h]=(0,r.useState)(!1),[p,y]=(0,r.useState)(!1),f=(0,r.useRef)(0),g=(0,n.c)("captcha"),j=(0,r.useCallback)(()=>{c(function(){let e,t,s,a=["+","-","\xd7"],r=a[Math.floor(Math.random()*a.length)];switch(r){case"+":s=(e=Math.floor(20*Math.random())+1)+(t=Math.floor(20*Math.random())+1);break;case"-":t=Math.floor(Math.random()*(e=Math.floor(20*Math.random())+10)),s=e-t;break;case"\xd7":s=(e=Math.floor(10*Math.random())+1)*(t=Math.floor(10*Math.random())+1);break;default:e=1,t=1,s=2}let n="".concat(Date.now(),"-").concat(Math.random().toString(36).substring(7));return{question:"".concat(e," ").concat(r," ").concat(t," = ?"),answer:s,id:n}}()),m(""),u(!1),h(!1),f.current=Date.now()},[]);(0,r.useImperativeHandle)(t,()=>({reset:j})),(0,r.useEffect)(()=>{y(!0),j()},[j]);let v=()=>{if(!i)return;let e=Date.now()-f.current;if(parseInt(d,10)===i.answer){if(e<2e3){u(!0),o&&o(),j();return}let t=btoa(JSON.stringify({id:i.id,answer:i.answer,time:e,ts:Date.now()}));h(!0),u(!1),s(t)}else u(!0),m("")};return p&&i?(0,a.jsxs)("div",{className:"my-4",children:[(0,a.jsx)("input",{type:"text",name:"website",tabIndex:-1,autoComplete:"off",style:{position:"absolute",left:"-9999px"}}),(0,a.jsxs)("div",{className:"p-4 rounded-xl border ".concat(b?"border-green-500 bg-green-500/10":x?"border-red-500 bg-red-500/10":"border-neon-blue/30 bg-cyber-dark/50"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:g("securityCheck")}),!b&&(0,a.jsx)("button",{type:"button",onClick:j,className:"text-gray-400 hover:text-neon-cyan transition-colors p-1",title:"New challenge",children:(0,a.jsx)(l.jTZ,{size:16})})]}),b?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-400",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,a.jsx)("span",{className:"text-sm font-medium",children:g("verified")})]}):(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("span",{className:"font-mono text-lg sm:text-xl font-bold text-neon-cyan bg-cyber-dark/80 px-3 py-2 rounded-lg border border-neon-blue/30",children:i.question})}),(0,a.jsx)("input",{type:"number",value:d,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),v())},onBlur:v,placeholder:"?",className:"w-20 px-3 py-2 rounded-lg border bg-cyber-dark/80 text-center font-mono text-lg focus:outline-none focus:ring-2 ".concat(x?"border-red-500 focus:ring-red-500/50":"border-neon-blue/30 focus:ring-neon-blue/50 focus:border-neon-blue"),autoComplete:"off"})]}),x&&(0,a.jsx)("p",{className:"text-red-400 text-xs mt-2",children:g("incorrectAnswer")})]})]}):(0,a.jsx)("div",{className:"my-4",children:(0,a.jsxs)("div",{className:"p-4 rounded-xl border border-neon-blue/30 bg-cyber-dark/50 animate-pulse",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,a.jsx)("span",{className:"text-sm text-gray-400",children:g("securityCheck")})}),(0,a.jsx)("div",{className:"h-10 bg-cyber-dark/80 rounded-lg"})]})})});o.displayName="Captcha";let i=o},4492:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(5155),r=s(4486),n=s(2821),l=s(3048);function o(e){let{children:t,title:s,subtitle:o,variant:i="default",className:c}=e,d=(0,l.ze)(),m=(0,a.jsxs)(a.Fragment,{children:[(s||o)&&(0,a.jsxs)("div",{className:"mb-4 sm:mb-6 border-b border-white/10 pb-3 sm:pb-4",children:[s&&(0,a.jsx)("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-neon-cyan mb-1 sm:mb-2 text-shadow-glow-light sm:text-shadow-glow",children:s}),o&&(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-400 uppercase tracking-wider",children:o})]}),t]});return d?(0,a.jsx)("div",{className:(0,n.A)("glass-panel-mobile p-4 sm:p-6 md:p-8","bordered"===i&&"border-2 border-neon-blue/30",c),children:m}):(0,a.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:(0,n.A)("glass-panel p-4 sm:p-6 md:p-8","bordered"===i&&"border-2 border-neon-blue/30",c),children:m})}},4670:(e,t,s)=>{Promise.resolve().then(s.bind(s,17))}},e=>{e.O(0,[844,594,240,211,441,493,358],()=>e(e.s=4670)),_N_E=e.O()}]);